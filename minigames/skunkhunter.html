<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        canvas {
            border: 2px solid #000;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    
    <script>
        const canvas = document.getElementById('gameCanvas');
        const context = canvas.getContext('2d');

        let playerX = 175; // Player's initial X position
        let playerY = 125; // Player's initial Y position
        const playerSize = 50; // Player's size
        const npcSize = 50; // NPC size
        const keys = {}; // Track key presses
        const npcSpeed = 1; // NPC movement speed
        const attackRange = 50; // Range at which player can attack

        // Player Health and Power
        let playerHealth = 100; // Player's health
        const maxPlayerHealth = 100; // Maximum health
        let attackPower = 20; // Attack power

        // NPC Health
        let npcHealth = 50; // NPC's health
        const maxNpcHealth = 50; // Maximum NPC health

        // Game state
        let isGameOver = false; // Flag to check if the game is over

        // Load images
        const playerImage = new Image();
        playerImage.src = 'https://cdn.discordapp.com/avatars/1208633283907158030/ed85bc245ae585b2a1586cf0c8661345.webp'; // Player image path

        const npcImage = new Image();
        npcImage.src = 'https://www.shutterstock.com/image-vector/chat-bot-icon-virtual-smart-600nw-2478937555.jpg'; // NPC character image

        // NPC position
        let npcX = Math.random() * (canvas.width - npcSize);
        let npcY = Math.random() * (canvas.height - npcSize);

        // Handle player movement
        document.addEventListener('keydown', (event) => {
            keys[event.key] = true;
        });

        document.addEventListener('keyup', (event) => {
            keys[event.key] = false;
        });

        // Function to attack
        function attack() {
            if (Math.abs(npcX - playerX) < attackRange && Math.abs(npcY - playerY) < attackRange) {
                npcHealth -= attackPower; // Reduce NPC health
                if (npcHealth < 0) npcHealth = 0; // Prevent negative health
            }
        }

        // Game loop function
        function gameLoop() {
            context.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas

            // Check if the game is over
            if (playerHealth <= 0) {
                isGameOver = true; // Set game over flag
                context.fillStyle = 'black';
                context.font = '30px Arial';
                context.fillText('Game Over', canvas.width / 2 - 70, canvas.height / 2);
                return; // Exit the game loop
            }

            // Move NPC towards the player
            if (npcX < playerX) npcX += npcSpeed;
            if (npcX > playerX) npcX -= npcSpeed;
            if (npcY < playerY) npcY += npcSpeed;
            if (npcY > playerY) npcY -= npcSpeed;

            // Check if NPC is attacking the player
            if (Math.abs(npcX - playerX) < 30 && Math.abs(npcY - playerY) < 30) {
                playerHealth -= 0.5; // Damage player over time if within attack range
                if (playerHealth < 0) playerHealth = 0; // Ensure health doesn't go below 0
            }

            // Move player based on key presses
            if (keys['w']) playerY -= 5; // Move up
            if (keys['a']) playerX -= 5; // Move left
            if (keys['s']) playerY += 5; // Move down
            if (keys['d']) playerX += 5; // Move right
            if (keys[' ']) attack(); // Attack when space is pressed

            // Draw Player
            context.drawImage(playerImage, playerX, playerY, playerSize, playerSize);
            
            // Draw NPC
            context.drawImage(npcImage, npcX, npcY, npcSize, npcSize);

            // Draw player's health bar
            drawHealthBar(playerX, playerY - 10, playerHealth, maxPlayerHealth, 'red', 'black'); // Player health bar

            // Draw NPC health bar
            drawHealthBar(npcX, npcY - 10, npcHealth, maxNpcHealth, 'green', 'black'); // NPC health bar

            // If NPC health is 0, display victory message
            if (npcHealth <= 0) {
                context.fillStyle = 'green';
                context.font = '30px Arial';
                context.fillText('You defeated the NPC!', canvas.width / 2 - 120, canvas.height / 2);
            }

            requestAnimationFrame(gameLoop); // Request next frame
        }

        // Function to draw health bars
        function drawHealthBar(x, y, currentHealth, maxHealth, fillColor, bgColor) {
            context.fillStyle = bgColor;
            context.fillRect(x, y, 200, 20); // Background for health bar
            context.fillStyle = fillColor;
            context.fillRect(x, y, (currentHealth / maxHealth) * 200, 20); // Current health
        }

        // Start the game loop
        gameLoop();
    </script>
</body>
</html>
